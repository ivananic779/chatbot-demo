<div class="api-key-input">
  <input type="password" [(ngModel)]="apiKey" name="apiKey" placeholder="Enter your API key" required>
</div>

<div class="system-message-section">
  <p>Ovdje možeš vidjeti što dajem kao kontekst. Kvaliteta će najviše ovisiti o tome što mu dajemo kao kontekst prije razgovora.</p>
  <button (click)="toggleSystemMessage()">
    {{ showSystemMessage ? 'Sakrij' : 'Prikaži' }} Kontekst
  </button>
  <pre *ngIf="showSystemMessage" class="system-message">{{ systemMessage }}</pre>
</div>

<div class="chat-container">
  <div class="messages">
    <div *ngFor="let message of messageHistory" class="message" [ngClass]="message.role">
      <strong>{{ message.role }}:</strong> <span [innerHTML]="message.content"></span>
    </div>
    <div *ngIf="currentStreamedMessage" class="message assistant">
      <strong>assistant:</strong> <span [innerHTML]="currentStreamedMessage"></span>
    </div>
  </div>
  
  <form (ngSubmit)="sendMessage()" class="input-form">
    <input type="text" [(ngModel)]="userInput" name="userInput" placeholder="Type your message...">
    <button type="submit">Send</button>
  </form>
</div>

<style>
.message {
  white-space: pre-wrap;
}
</style>
